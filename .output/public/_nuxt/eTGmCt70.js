import{H as pe}from"./CLvqHZAY.js";import{u as me}from"./CopOv_TU.js";import{f as U,u as le,r as a,s as V,o as _,n as G,w as q,v as $,a as e,i as s,b,T as D,c as w,j as Q,y as K,x as ae,d as X,t as R,z as S,B as _e,C as fe,p as ie,e as ce,_ as ee,g as re,q as de,D as be,h as ge,E as ye,F as we}from"./OWFocWMD.js";import{i as j,b as J,_ as $e,a as ke}from"./Ce2f6elP.js";import{a as xe,u as Ce}from"./BMQyeFDy.js";import{t as qe}from"./BDDbVWYF.js";import{b as ne}from"./DQ3176xY.js";import{_ as Ie}from"./CVwaTTZb.js";function Te(o,y=!1){let v=!0;return o.length>21&&(o=o.slice(0,21),v=!1),o.includes(" ")&&(o=o.replace(/\s/g,""),v=!1),o.match(/[^a-zA-Z0-9-]/g)&&(o=o.replace(/[^a-zA-Z0-9-]/g,""),v=!1),o.match(/--/g)&&(o=o.replace(/--/g,"-"),v=!1),y?v:o}const g=o=>(ie("data-v-615e53ba"),o=o(),ce(),o),Be={class:"create-panel"},Se={class:"options"},Le=g(()=>e("h3",{class:"title"},"Create a post",-1)),Me=[Le],Ze=g(()=>e("h3",{class:"title"},"Create a branch",-1)),Pe=[Ze],De=g(()=>e("li",null,null,-1)),We=g(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48"},[e("path",{d:"m249 849-42-42 231-231-231-231 42-42 231 231 231-231 42 42-231 231 231 231-42 42-231-231-231 231Z"})],-1)),He=[We],Ee={class:"content"},Ve={key:0,class:"create-post"},Qe=g(()=>e("div",{class:"title"},[e("h3",null,"Post title"),e("input",{type:"text",placeholder:"Title"})],-1)),Fe=g(()=>e("div",{class:"content"},[e("h3",null,"Content"),e("textarea",{placeholder:"Content"})],-1)),ze=g(()=>e("div",{class:"submit"},[e("button",{class:"submit",alt:"Submit",title:"Submit"},[e("h3",null,"Submit")])],-1)),Ne=[Qe,Fe,ze],Ae={class:"field name container"},Ye=g(()=>e("label",{for:"branch-name"},"Name your branch",-1)),Re=g(()=>e("p",{class:"placeholder"},"b/",-1)),Oe={class:"tooltip"},Xe={class:"tip"},je=g(()=>e("label",{for:"branch-type"},"Set your branch visibility",-1)),Ue=g(()=>e("option",{value:"public",title:"Anybody can view the community",selected:""},"Public",-1)),Ke=g(()=>e("option",{value:"secret",title:"Anybody with a link or an invite can view the community"},"Secret",-1)),Je=[Ue,Ke],Ge={class:"field description"},et=g(()=>e("label",{for:"branch-description"},"Describe your branch",-1)),tt={class:"tooltip"},st={class:"tip"},at={class:"field submit"},nt={class:"error"},ot={xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48"},lt=g(()=>e("path",{d:"M196 725q-20-36-28-72.5t-8-74.5q0-131 94.5-225.5T480 258h43l-80-80 39-39 149 149-149 149-40-40 79-79h-41q-107 0-183.5 76.5T220 578q0 29 5.5 55t13.5 49l-43 43Zm280 291L327 867l149-149 39 39-80 80h45q107 0 183.5-76.5T740 577q0-29-5-55t-15-49l43-43q20 36 28.5 72.5T800 577q0 131-94.5 225.5T480 897h-45l80 80-39 39Z"},null,-1)),it=[lt],O=200,ct=U({__name:"create-panel",setup(o){const{data:y}=le(),v=a(null),h=a(null),c=a(!0);V(c,n=>{var t,i,k,M,F,z,N,A;n?((t=v.value)==null||t.classList.add("inactive"),(i=v.value)==null||i.classList.remove("active"),(k=h.value)==null||k.classList.remove("inactive"),(M=h.value)==null||M.classList.add("active")):((F=v.value)==null||F.classList.remove("inactive"),(z=v.value)==null||z.classList.add("active"),(N=h.value)==null||N.classList.add("inactive"),(A=h.value)==null||A.classList.remove("active"))});const u=a(21),p=a(null);V(p,n=>{r.value=!1,u.value=21-n.length,p.value=Te(n)});const x=a(""),r=a(!1),f=a(null);V(p,n=>{f.value&&clearTimeout(f.value),f.value=setTimeout(async()=>{await ne(n)?(console.log(await ne(n)),r.value=!0,x.value="Sorry, that name is already in use!"):(r.value=!1,x.value="")},800)});const C=a(O),d=a(null),W=a(""),Z=a(!1);V(d,n=>{C.value=O-n.length,n.length>O&&(d.value=n.slice(0,O)),Z.value=n.length>O,Z.value?W.value="Sorry, your description is too long!":W.value=""});const I=a(null),T=a(null),L=a(null);function H(n=!1){var t,i,k,M;if(n){(t=L.value)==null||t.classList.add("disabled");return}(i=I.value)!=null&&i.checkValidity()?(k=L.value)==null||k.classList.remove("disabled"):(M=L.value)==null||M.classList.add("disabled")}const P=a(!1),l=a(!1),m=a("");async function B(){var n,t,i,k,M,F,z,N,A,te;if((n=I==null?void 0:I.value)!=null&&n.checkValidity()){const se=p.value,he=d.value,ve=T.value,Y=await xe("/api/branches/create",{method:"POST",body:JSON.stringify({branch_name:se,branch_description:he,branch_type:ve,user_email:(i=(t=y.value)==null?void 0:t.user)==null?void 0:i.email})},"$lW5Mf0mMdz");(k=Y.data.value)!=null&&k.success?(P.value=!1,m.value="Branch created successfully! Redirecting...",l.value=!0,(M=L.value)==null||M.classList.add("disabled"),setTimeout(()=>{m.value="",P.value=!1,fe(`/b/${se}`)},3e3)):(P.value=!0,m.value="",l.value=!1,(F=L.value)==null||F.classList.remove("disabled"),((z=Y.data.value)==null?void 0:z.field)==="branch_name"&&(x.value=(N=Y.data.value)==null?void 0:N.message,r.value=!0),((A=Y.data.value)==null?void 0:A.field)==="branch_description"&&(W.value=(te=Y.data.value)==null?void 0:te.message,Z.value=!0),H(!0))}}return(n,t)=>(_(),G(D,{name:"fade"},{default:q(()=>[$(e("div",Be,[e("nav",Se,[e("ul",null,[e("li",null,[e("button",{class:"create-post active",onClick:t[0]||(t[0]=i=>c.value=!0),ref_key:"createBranch",ref:h,alt:"Create a post",title:"Create a post"},Me,512)]),e("li",null,[e("button",{class:"create-post inactive",onClick:t[1]||(t[1]=i=>c.value=!1),ref_key:"createPost",ref:v,alt:"Create a branch",title:"Create a branch"},Pe,512)]),De,e("li",null,[e("button",{class:"close",onClick:t[2]||(t[2]=i=>(("isCreatingIndex"in n?n.isCreatingIndex:s(j))().value=!1,("toggleFeedMenu"in n?n.toggleFeedMenu:s(qe))().value=!1)),alt:"Close",title:"Close create panel"},He)])])]),e("section",Ee,[b(D,{name:"fade2"},{default:q(()=>[s(c)?(_(),w("form",Ve,Ne)):Q("",!0)]),_:1}),b(D,{name:"fade2"},{default:q(()=>[s(c)?Q("",!0):(_(),w("form",{key:0,class:"create-branch",ref_key:"branchForm",ref:I,onSubmit:t[10]||(t[10]=i=>i.preventDefault())},[e("div",Ae,[e("div",null,[Ye,$(e("input",{id:"branch-name",class:"branch-name-input","onUpdate:modelValue":t[3]||(t[3]=i=>K(p)?p.value=i:null),type:"text",autocomplete:"off",onInput:t[4]||(t[4]=i=>H()),required:""},null,544),[[ae,s(p)]]),Re,e("div",Oe,[$(e("p",Xe,[X("Characters remaining: "),e("span",null,R(s(u)),1)],512),[[S,!s(r)]]),$(e("p",{class:"error"},R(s(x)),513),[[S,s(r)]])])]),e("div",null,[je,$(e("select",{id:"branch-type",class:"branch-type-input","onUpdate:modelValue":t[5]||(t[5]=i=>K(T)?T.value=i:null),onClick:t[6]||(t[6]=i=>H()),required:""},Je,512),[[_e,s(T)]])])]),e("div",Ge,[et,$(e("textarea",{id:"branch-description",class:"branch-description-input","onUpdate:modelValue":t[7]||(t[7]=i=>K(d)?d.value=i:null),placeholder:"Let people know what your community is all about",autocomplete:"off",onInput:t[8]||(t[8]=i=>H()),required:""},null,544),[[ae,s(d)]]),e("div",tt,[$(e("p",st,[X("Characters remaining: "),e("span",null,R(s(C)),1)],512),[[S,!s(Z)]]),$(e("p",{class:"error",id:"description-error"},R(s(W)),513),[[S,s(Z)]])])]),e("div",at,[$(e("p",{class:"message"},R(s(m)),513),[[S,!s(P)]]),$(e("p",nt,null,512),[[S,s(P)]]),e("button",{class:"submit disabled",alt:"Submit",ref_key:"submitBranchButton",ref:L,onClick:t[9]||(t[9]=i=>B()),title:"Submit"},[$(e("h3",null,"Submit",512),[[S,!s(l)]]),$((_(),w("svg",ot,it,512)),[[S,s(l)]])],512)])],544))]),_:1})])],512),[[S,("isCreatingIndex"in n?n.isCreatingIndex:s(j))().value]])]),_:1}))}}),rt=ee(ct,[["__scopeId","data-v-615e53ba"]]),dt={class:"post-info"},ut={class:"branch-attributes"},ht=e("div",{class:"branch-icon"},[e("img",{src:"https://i.imgur.com/Rnj7kZj.jpeg"})],-1),vt=e("p",{class:"dot"},".",-1),pt=e("p",{class:"post-time"},"4hr ago",-1),mt={class:"user-attributes"},_t={class:"user-name"},ft=e("span",null,"posted by",-1),bt=e("h3",{class:"title"},"For real though, what is the counterplay for Widow?",-1),gt={class:"body"},yt={class:"text-body"},wt=e("div",{class:"content"},[e("p",null," Hey guys, "),e("p",null," I recently got my DPS to Plat 1, which means all my roles are now that rank or higher. My MMR has hit the point where Widow players can dominate lobbies now. I'm going to be real with you, it's so SO incredibly frustrating. She's picked in over half of my games and I cannot find adequate counterplay no matter what I try. It's to the point where I can only play a few games before I have to quit for the day because I'm so tilted by Widow players. "),e("p",null," I mainly play support. I can try and click on her head as Kiriko, right-click her as Zen or harass her as Ana, but she clicks on my head faster so I have a low success rate of even forcing her to reposition. "),e("p",null," I only play Cass and Ashe for DPS and both of them have too much fall-off to scare a Widow away. Even if I try, I usually get my head clicked on and it's a 4v5 for my team. "),e("p",null," Edit: I know a lot of the responses for DPS will be to just mirror the Widow. I understand this is probably the best option, but my Widow win rate is ~40%. I can get a few picks here and there but I instantly lose any Widow 1v1. I find her boring to play as and she is not the hero I want to focus on getting better at. ")],-1),$t={class:"interaction-bar"},kt={class:"like"},xt=e("path",{d:"m480 935-41-37q-106-97-175-167.5t-110-126Q113 549 96.5 504T80 413q0-90 60.5-150.5T290 202q57 0 105.5 27t84.5 78q42-54 89-79.5T670 202q89 0 149.5 60.5T880 413q0 46-16.5 91T806 604.5q-41 55.5-110 126T521 898l-41 37Z"},null,-1),Ct=[xt],qt=e("path",{d:"m480 935-41-37q-105.768-97.121-174.884-167.561Q195 660 154 604.5T96.5 504Q80 459 80 413q0-90.155 60.5-150.577Q201 202 290 202q57 0 105.5 27t84.5 78q42-54 89-79.5T670 202q89 0 149.5 60.423Q880 322.845 880 413q0 46-16.5 91T806 604.5Q765 660 695.884 730.439 626.768 800.879 521 898l-41 37Zm0-79q101.236-92.995 166.618-159.498Q712 630 750.5 580t54-89.135q15.5-39.136 15.5-77.72Q820 347 778 304.5T670.225 262q-51.524 0-95.375 31.5Q531 325 504 382h-49q-26-56-69.85-88-43.851-32-95.375-32Q224 262 182 304.5t-42 108.816Q140 452 155.5 491.5t54 90Q248 632 314 698t166 158Zm0-297Z"},null,-1),It=[qt],Tt=e("p",null,"623",-1),Bt={class:"dislike"},St=e("path",{d:"M239 216h467v512l-278 288-33-26q-11-8-14.5-18t-3.5-23v-10l45-211H100q-23 0-41.5-18.5T40 668v-82q0-11 2.5-25.5T50 535l116-268q9-21 29.5-36t43.5-15Zm527 512V216h114v512H766Z"},null,-1),Lt=[St],Mt=e("path",{d:"M242 216h444v512l-278 288-39-31q-6-5-9-14t-3-22v-10l45-211H103q-24 0-42-18t-18-42v-81.839Q43 579 41.5 571.5T43 557l126-290q8.878-21.25 29.595-36.125Q219.311 216 242 216Zm384 60H229L103 575v93h373l-53 249 203-214V276Zm0 427V276v427Zm60 25v-60h133V276H686v-60h193v512H686Z"},null,-1),Zt=[Mt],Pt=e("p",null,"8",-1),Dt=e("div",{class:"comment"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48"},[e("path",{d:"M80 976V236q0-23 18-41.5t42-18.5h680q23 0 41.5 18.5T880 236v520q0 23-18.5 41.5T820 816H240L80 976Zm60-145 75-75h605V236H140v595Zm0-595v595-595Z"})]),e("p",null,"20")],-1),Wt=e("section",{class:"more-bar"},null,-1),Ht=U({__name:"post2",setup(o){const y=a(null),v=a(null),h=a(!1),c=a(!1);re(()=>{p()});const u=a(null);function p(){if(!y.value.classList.contains("text"))return;u.value.parentElement.clientHeight<200?y.value.classList.add("short"):y.value.classList.remove("short")}return(x,r)=>{const f=Ie;return _(),w("article",{ref_key:"postElement",ref:y,class:"post"},[e("header",null,[e("div",dt,[e("div",ut,[ht,b(f,{class:"branch-name"},{default:q(()=>[X("b/overwatch")]),_:1}),vt,pt]),e("div",mt,[e("p",_t,[ft,X(),b(f,null,{default:q(()=>[X("cadywamapus")]),_:1})])])]),bt]),e("section",gt,[e("div",yt,[wt,e("div",{ref_key:"textFadeOut",ref:u,class:"fade"},null,512)])]),e("footer",{ref_key:"footer",ref:v,onDblclick:r[4]||(r[4]=C=>{h.value=!0,c.value=!1})},[e("section",$t,[e("div",kt,[b(D,{name:"fade"},{default:q(()=>[s(h)?(_(),w("svg",{key:0,onClick:r[0]||(r[0]=C=>h.value=!1),class:"liked",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48"},Ct)):Q("",!0)]),_:1}),b(D,{name:"fade"},{default:q(()=>[s(h)?Q("",!0):(_(),w("svg",{key:0,onClick:r[1]||(r[1]=C=>{h.value=!0,c.value=!1}),class:"unliked",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48"},It))]),_:1}),Tt]),e("div",Bt,[b(D,{name:"fade"},{default:q(()=>[s(c)?(_(),w("svg",{key:0,onClick:r[2]||(r[2]=C=>c.value=!1),class:"disliked",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48"},Lt)):Q("",!0)]),_:1}),b(D,{name:"fade"},{default:q(()=>[s(c)?Q("",!0):(_(),w("svg",{key:0,onClick:r[3]||(r[3]=C=>{c.value=!0,h.value=!1}),class:"undisliked",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48"},Zt))]),_:1}),Pt]),Dt]),Wt],544)],512)}}}),oe=()=>de("indexPostCurrentAvailableZones",()=>"three"),E=()=>de("controlBarPostitionIndex",()=>"middle"),ue=o=>(ie("data-v-65fbf640"),o=o(),ce(),o),Et={key:0,class:"posts-pending"},Vt=ue(()=>e("p",{style:{"margin-top":"3rem"}},"Loading",-1)),Qt=[Vt],Ft={key:1,class:"posts-loaded"},zt={class:"posts"},Nt=ue(()=>e("div",{class:"fade"},null,-1)),At=U({__name:"authenticated",setup(o){const{pending:y,data:v}=Ce("/api/posts","$zZn01p7RZK");V(v,l=>{});const h=a(null),c=a(null);V(j,l=>{l.value===!0?(c.value.classList.add("creating"),h.value.style.height="calc(100vh + 0.5rem)"):(c.value.classList.remove("creating"),h.value.style.height="100%")});const u=a(0),p=a(0);let x=0,r=0,f=0,C=0;const d=a(0);function W(l){l.preventDefault(),J().value=!0,f=document.body.clientWidth,C=c.value.clientWidth,x=l.clientX,r=l.clientY}function Z(l){if(!J().value)return;d.value=(f-C-50)/2;const m=l.clientX-x,B=l.clientY-r;x=l.clientX,r=l.clientY,u.value+=m,p.value+=B}function I(){T(),J().value=!1}function T(){const l=document.body.clientWidth,B=l/3/2;l>1e3?(oe().value="three",L(B)):(oe().value="one",H()),p.value=0}function L(l){u.value<=-d.value+l?(u.value=-d.value,E().value="left"):u.value>=d.value-l?(u.value=d.value,E().value="right"):(u.value=0,E().value="middle")}function H(){u.value=0,E().value="middle"}function P(l,m=200,B=.009,n=199){return m/(1+Math.exp(-B*(l-n)))}return be(()=>{f=document.body.clientWidth,d.value=(f-600-50)/2,E().value==="left"?u.value=-d.value:E().value==="right"?u.value=d.value:u.value=0,T()}),re(()=>{c.value!==null&&window.addEventListener("resize",()=>{f=document.body.clientWidth,c.value!==null&&(d.value=(f-c.value.clientWidth-50)/2,T())})}),ge(()=>{j().value=!1,window.removeEventListener("resize",()=>{f=document.body.clientWidth,d.value=(f-c.value.clientWidth-50)/2,T()})}),(l,m)=>{const B=$e,n=rt,t=ke,i=Ht;return _(),w("div",{class:"overflow",ref_key:"overflowY",ref:h,onMousemove:Z,onMouseup:m[1]||(m[1]=k=>I()),onMouseleave:m[2]||(m[2]=k=>I())},[e("section",{class:"posts-feed",style:ye(`top: clamp(0px, ${s(p)+"px"}, ${P(s(p))}px); left: clamp(-${s(d)}px, ${s(u)+"px"}, ${s(d)-8}px)`)},[e("div",{class:"draggable",onMousedown:W,onMouseup:m[0]||(m[0]=k=>I())},[b(B,{currentPage:"index"})],32),b(n),e("div",{class:"post-container",ref_key:"postsContainer",ref:c},[s(y)?(_(),w("div",Et,Qt)):(_(),w("div",Ft,[e("section",zt,[Nt,b(t,{class:"text"}),b(i,{class:"text rising"}),b(t,{class:"media"}),b(t,{class:"media rising"})])]))],512)],4)],544)}}}),Yt=ee(At,[["__scopeId","data-v-65fbf640"]]),Rt={},Ot={style:{"margin-top":"10rem"},class:"text-center"};function Xt(o,y){return _(),w("p",Ot," You are not authenticated. ")}const jt=ee(Rt,[["render",Xt]]),Ut=e("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),Kt=e("link",{rel:"preconnect",href:"https://fonts.gstatic.com"},null,-1),Jt=e("link",{href:"https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap",rel:"stylesheet"},null,-1),is=U({__name:"index",setup(o){me({title:"Home",meta:[{name:"description",content:"This is the home page"}]});const{status:y,signOut:v,data:h}=le();return a(!1),a(""),(c,u)=>{const p=pe;return _(),w(we,null,[b(p,null,{default:q(()=>[Ut,Kt,Jt]),_:1}),s(y)==="authenticated"?(_(),G(Yt,{key:0})):(_(),G(jt,{key:1}))],64)}}});export{is as default};
